# Стайлгайд исходного кода и соглашение о наименовании коммитов и веток репозитория

## Python

(Модифицированная версия руководства PEP8)

### 1. Отступы

Используйте для одного уровня отступа 4 пробела

### 2. Длина строки

Установите в своем редакторе максимальную длину строки в 79 символов.

Автоматический перенос строк, и код будет труднее понять. Так что, пожалуйста, ограничьте длину строки 79 символами, и 72 символами в случае длинных блоков текста (строки документации или комментарии).

Предпочтительный способ переноса длинных строк — использование подразумевающегося продолжения строки между обычными, квадратными и фигурными скобками. В случае необходимости можно добавить еще одну пару скобок вокруг выражения, но часто лучше выглядит обратный слэш. Постарайтесь сделать правильные отступы для перенесённой строки. Предпочтительнее вставить перенос строки после бинарного оператора, но не перед ним.


``` python
class Rectangle(Blob): 
    def __init__(self, width, height, 
                 color='black', emphasis=None, highlight=0): 
        if width == 0 and height == 0 and \ 
           color == 'red' and emphasis == 'strong' or \ 
           highlight > 100: 
            raise ValueError("sorry, you lose") 
        if width == 0 and height == 0 and (color == 'red' or 
                                           emphasis is None): 
            raise ValueError("I don't think so -- values are %s, %s" % 
                             (width, height)) 
        Blob.__init__(self, width, height, 
                      color, emphasis, highlight) 
```


### 3. Пустые строки

Отделяйте функции (верхнего уровня, не функции внутри функций) и определения классов двумя пустыми строчками.

Определения методов внутри класса отделяйте одной пустой строкой.

Дополнительные отступы строками могут быть изредка использованы для выделения группы логически связанных функций. Пустые строки могут быть пропущены, между несколькими выражениями, записанными в одну строку, например, «заглушки» функций.

Используйте (без энтузиазма) пустые строки в коде функций, чтобы отделить друг от друга логические части.

### 4. Import

Импортирование разных модулей должно быть на разных строчках, например

правильно:

``` python
import os
import sys
```
неправильно:

``` python
import os, sys
```
В то же время, можно писать вот так:
``` python
from subprocess import Popen, PIPE
```
### 5. Пробелы в выражениях и инструкциях

#### Избегайте использования пробелов в следующих ситуациях:

1. Сразу после или перед скобками (обычными, фигурными и квадратными)

можно:
``` python 
spam(ham[1], {eggs: 2})
```

нельзя:
``` python
    spam( ham[ 1 ], { eggs: 2 } )
```
2. Сразу перед запятой, точкой с запятой, двоеточием:

``` python
# Можно
if x == 4: print x, y; x, y = y, x

# Нельзя
if x == 4 : print x , y ; x , y = y , x
```

3. Сразу перед открывающей скобкой, после которой начинается список аргументов при вызове функции:

``` python
# Можно
spam(1)

# Нельзя
spam (1)
```
4. Сразу перед открывающей скобкой, после которой следует индекс или срез:

``` python
# Можно
dict['key'] = list[index]

# Нельзя
dict ['key'] = list [index]
```
5. Использование более одного пробела вокруг оператора присваивания (или любого другого) для того, чтобы выровнять его с другим таким же оператором на соседней строке:

```python
# Можно
x = 1 
y = 2 
long_variable = 3 

# Нельзя
x             = 1 
y             = 2 
long_variable = 3
```
#### Прочие рекомендации:

1. Вседа окружайте эти бинарные операторы одним пробелом с каждой стороны: присваивание (``` =, +=, -= и прочие```), сравнения (``` ==, <, >, !=, <>, <=, >=, in, not in, is, is not```), логические операторы (```and, or, not```).

2. Ставьте пробелы вокруг арифметических операций.

``` python
# Можно
i = i + 1 
submitted += 1 
x = x * 2 - 1 
hypot2 = x * x + y * y 
c = (a + b) * (a - b) 

# Нельзя
i=i+1 
submitted +=1 
x = x*2 - 1 
hypot2 = x*x + y*y 
c = (a+b) * (a-b)
```
3. Не используйте пробелы для отделения знака `=`, когда он употребляется для обозначения аргумента-ключа (keyword argument) или значения параметра по умолчанию.

``` python
def complex(real, imag=0.0): 
    return magic(r=real, i=imag) 

def complex(real, imag = 0.0): 
    return magic(r = real, i = imag)
```

4. Не используйте составные инструкции (несколько команд в одной строке).

``` python
# Можно
if foo == 'blah': 
    do_blah_thing() 
    do_one() 
    do_two() 
    do_three()

# Нельзя
if foo == 'blah': do_blah_thing(); do_one(); do_two(); do_three()

```
5. Иногда можно писать тело циклов ```while, for``` или ветку ```if``` в той же строке, если команда короткая, но если команд несколько, никогда так не пишите.
6. 
``` python
# Можно
if foo == 'blah': do_blah_thing() 
for x in lst: total += x 
while t < 10: t = delay() 

# Нельзя
if foo == 'blah': do_blah_thing() 
else: do_non_blah_thing() 
try: something() 
finally: cleanup() 
do_one(); do_two(); do_three(long, argument, list, like, this) 
if foo == 'blah': one(); two(); three()
```

### 6. Комментарии

Комментарии, которые противоречат коду, хуже, чем отсутствие комментариев. Всегда исправляйте комментарии, если меняете код!

Комментарии должны являться законченными предложениями. Если комментарий — фраза или предложение, первое слово должно быть написано с большой буквы, если только это не имя переменной, которая начинается с маленькой буквы (кстати, никогда не отступайте от этого правила для имен переменных).

Если комментарий короткий, можно опустить точку в конце предложения. Блок комментариев обычно состоит из одного или более абзацев, составленных из полноценных предложений, поэтому каждое предложение должно оканчиваться точкой.

Ставьте два пробела после точки в конце предложения.

Если вы пишете по-английски, не забывайте о Странке и Уайте (имеется в виду книга Strunk & White, “Elements of style”, которая является практически эталонным руководством по правильному написанию текстов на английском языке, — прим. перев.)

Программисты, которые не говорят на английском языке, пожалуйста, пишите комментарии на английском, если только вы не уверены на 120 процентов, что ваш код никогда не будут читать люди, не знающие вашего родного языка.


#### Блок комментариев
Блок комментариев обычно объясняет код (весь, или только некоторую часть), идущий после блока, и должен иметь тот же отступ, что и сам код. Каждая строчка такого блока должна начинаться с символа # и одного пробела после него (если только сам текст комментария не имеет отступа).

Абзацы внутри блока комментариев лучше отделять строкой, состоящей из одного символа #.

#### Комментарии в строке с кодом
Старайтесь реже использовать подобные комментарии.

Такой комментарий находится в той же строке, что и инструкция. «Встрочные» комментарии должны отделяться хотя бы двумя пробелами от инструкции. Они должны начинаться с символа # и одного пробела.

Комментарии в строке с кодом не нужны и только отвлекают от чтения, если они объясняют очевидное. Не пишите вот так:

``` python
x = x + 1                 # Увеличиваем X на один
```

Впрочем, иногда такие комметарии полезны:
``` python
x = x + 1                  # Место для рамки окна
```

#### Строки документации

Пишите документацию для всех модулей, функций, классов, методов, которые объявлены как public. Строки документации необязательны для не-public методов, но лучше написать, что делает метод. Комментарий нужно писать после строки с ```def```.

Внутри функции нужно делать блоки комментариев, описывающий каждый блок цикла или условия

Блок документации функции заключается в """
Закрывающие """ отделяются одной строкой от комментария

Пример правильного описания функции:

``` python
def foo(p, s, t):

    """
    Функция foo нужна для <описание назначения>
    Параметры:
        @param <имя параметра> (<тип: int, float, string, bool>) — <описание>
    Источник: <Откуда взята функция, если самописная — указать ник автора>
    Использование: <Максимально подробно описать использование функции в скрипте>
        "Реплика"
        window hide
        $ foo(1, 2, 3)

    """
    ## Проверка на ...
    if (condition):
        pass
    
    ## Цикл, делающий ...
    while True:
        pass
```

#### 7. Соглашение о наименовании

Для наименования переменных и функций используется стиль lowercase_with_underscores (нижний регистр с разделением слов символом нижнего подчеркивания)

Для наименования классов используется стиль CamelCase (верблюжий регистр)

Для наименования констант используется стиль UPPERCASE_WITH_UNDERSCORES (верхний регистр с разделением слов символом нижнего подчеркивания)

Естественно, не допукается наименование переменных, функций и классов на русском языке в латинской раскладке. Только английский язык!


``` python
def generate_random_event():
    bad_usual_events = {}
    bad_rare_events = {}
    bad_urare_events = {}

    SOME_CONSTANT = 0

class SomeStupidClass():
    def __init__ ():
        pass
```


# Ren'Py

(Указаны только отличия от Python, при этом эта часть руководства дополняет питоновскую часть, а не переписывает её.)


## 1. Пустые строки

Рекомендуется отделять двумя пустыми строками логически завершенные части кода (сцены и label'ы), одной строкой вызов python-блоков.

``` renpy
label start:
    scene dull_pic
    show girl at right
    show boy at left
    g "qwerty uiop"
    b "sdhuiod ifjecio"

    $ some_function()

    g "asdf ghjkl"
    g "cfjdhvhc dulcj"

    scene some_scene
    b "dfhjdihd fhdei"

    python:
        pass
    
    "zxcvb nm"

    jump some_label


label some_label:
    "qwerty uiop"
```

## 2. Метки

Рекомендуется жестко указывать метку на которую нужно перейти, т. к. определения ветки можно переместить, например, в другой файл.

## 3. Спрайты

Для предотвращения ошибок с отрисовкой спрайтов рекомендуется перед переходом на другую сцену скрывать спрайты

## 4. Соглашение о наименовании

Для наименования переменных, объявляющих персонажа используется переведенное на английский язык имя персонажа, записанное в стиле mixedCase (первое слово с маленькой буквы, остальные с большой)

``` renpy
jamesBlackHat = Character('Джеймс Черношляп')
```

# Git

## 1. Наименование коммитов

Сообщение коммита оформляется как предложение: начинается с заглавной буквы и заканчивается точкой и записывается на русском языке.
Сообщение не должно содержать более 50 символов в строке (первая строка - краткое и понятное описание проделанной работы), другие строки можно начинать с дефиса (-), чтобы создать маркированный список.

Для создания коммита не рекомендуется использовать `git commit -m ""`, используйте вместо этого `git commit` для открытия редактора сообщения коммита в окне редактора 

## 2. Наименование веток

Используйте "группировку" веток по нику и меткам:

`dadyarri/<метка>/<имя ветки>`

`Evil-Pie/<метка>/<имя ветки>`

`wityat/<метка>/<имя ветки>`

`6a16ac/<метка>/<имя ветки>`

Где "метка" - это один из пунктов:

* b - ошибка в коде, которую нужно исправить
* fch - новая особенность/механика
* exp - экспериментальная фишка
* wip - особенность, работа над которой еще не завершена

а имя ветки это краткое описание совершенной в этой ветке работе в стиле lowercase-with-hyphens (в нижнем регистре с разделением слов дефисами)
